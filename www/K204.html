<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: content: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <script src="components/loader.js"></script>
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="css/default.css">
    <link rel="stylesheet" href="css/style.css">
    <script>
    </script>
</head>
<body>
    <div class="header-contents">
        <h1>応用課題204</h1>
        <h2>カウントダウンタイマー</h2>
    </div><!-- /.header-contents -->

    <div class="main-wrapper">
        <section>
          <div id="indata">
            <input type="text" id="place" value="東京オリンピック"><br>
            <input type="text" id="hiduke" value="2020/06/24"><br>
            <button onclick="recalc()">計算</button>			
          </div>		
          <h2><span id="placeAns">東京オリンピック</span> 開催(<span id="hidukeAns">2020/06/24</span>）まで</h2>
          <p class="timer">あと
            <span id="day"  class="time"></span>日
            <span id="hour" class="time"></span>時間
            <span id="min"  class="time"></span>分
            <span id="sec"  class="time"></span>秒
          </p>
        </section>
    </div><!-- /.main-wrapper -->

    <footer>課題実習用テンプレ（フッター）</footer>
    <script>
        function countdown(due) {
            var now = new Date();
            //年月日時分秒
            var rest = due.getTime() - now.getTime();
            var sec = Math.floor(rest / 1000) % 60;
            var min = Math.floor(rest / 1000 / 60) % 60;
            var hours = Math.floor(rest / 1000 / 60 / 60) % 24;
            var days = Math.floor(rest / 1000 / 60 / 60 / 24);
            var count = [days, hours, min, sec];

            //配列を返す	
            return count;
        }
l        //var goal = new Date(2020, 6, 24);

        
        function recalc(){
          var goal;
          var pl = document.getElementById('place').value;
          var hd = document.getElementById('hiduke').value;
          document.getElementById('placeAns').textContent = pl;
          document.getElementById('hidukeAns').textContent = hd;

          goal = new Date(hd);
           var counter = countdown(goal);
          
          //年月日時分秒を表示
          document.getElementById('day').textContent = counter[0];
          document.getElementById('hour').textContent = counter[1];
          document.getElementById('min').textContent = counter[2];
          document.getElementById('sec').textContent = counter[3];
          refresh();
        }

        function refresh() {
          //5秒ごと
          setTimeout(recalc, 1000);
        }

    </script>        
</body>
</html>
